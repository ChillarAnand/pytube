<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>pytube &middot; Mobile Games to the Cloud With Python</title>

    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="pytube Full Atom Feed" />
    <link href="/feeds/europython-2014.atom.xml" type="application/atom+xml" rel="alternate" title="pytube Categories Atom Feed" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          rel="stylesheet" 
          integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw=="
          crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/theme/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/theme/css/base.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->



</head>

<body>
  <div class="container">
    <header id="banner" class="header clearfix">
      <nav>
        <ul class="nav nav-pills pull-right">
            <li role="presentation">
            <a href="/categories.html">Categories</a>
          </li>
        </ul>
      </nav>
      <h3 class="text-muted">
        <a href="/">pytube <strong></strong></a>
      </h3>
    </header>

<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/europython-2014/europython-2014-mobile-games-to-the-cloud-with-python.html" rel="bookmark"
         title="Permalink to Mobile Games to the Cloud With Python">Mobile Games to the Cloud With Python</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2014-07-31T00:46:00+00:00">
      Thu 31 July 2014
    </time>
    <time class="modified" datetime="2014-08-02T11:26:00+00:00">
      Sat 02 August 2014
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="/author/darko-ronic.html">Darko Ronić</a>
          <a class="url fn" href="/author/mislav-stipetic.html">Mislav Stipetic</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <a class="reference external image-reference" href="http://www.youtube.com/watch?v=wWypp2KexGs"><img alt="Mobile Games to the Cloud With Python" src="http://i.ytimg.com/vi/wWypp2KexGs/hqdefault.jpg" style="width: 600px;" /></a>
<div class="section" id="description">
<h2>Description</h2>
<p>#### The Talk</p>
<p>This talk has two goals. Showing the audience the lessons we learned during a project which moved a simple mobile game to a server backend is our first intention. In addition to that we want to describe how such a system works in a real life example, to show which problems and which requirements arise in its creation. When the audience leaves the talk they will know how a real-life mobile game uses Python for powering the backend servers.</p>
<p>#### The Problem</p>
<p>Most of the game development for mobile devices is focused on running the game on the device. The game designers and game developers play a primary role in creating the product. The server backend plays a supporting role providing a multiplayer or social experience to the users. Indeed, at Nanobit Ltd., things were also done that way. We had a small Python infrastructure built around Django which provided a small portion of multiplayer experience for the players. The majority of development was still focused on playing the game on the device. That way of thinking was put to test when we decided to center our future games around the multiplayer experience. Due to the fact that our infrastructure at the time was not enough for what we had in mind, we had to start from scratch. The decision was made to use Python as the center of our new infrastructure.</p>
<p>In order to achieve it, a server backend was needed that would allow the game to be played “in the cloud” with the device only being a terminal to the player. Most of the game logic would have to be processed in the cloud which meant that each player required a constant connection to the backend and with over 100.000 players in our previous games that presented a challenge. How to build an infrastructure which can support that? Since every user action had to be sent to the backend how to process thousands of them quick enough? Those problems were big and were just the start.</p>
<p>#### The Solution</p>
<p>The design of the backend lasted for a couple of months and produced a scalable infrastructure based on “workers” developed in Python, “web servers” that use Tornado and a custom message queue which connected the two. The storage part is a combination of Riak and Redis. Since the backend is scalable new workers and new web servers had to be deployed easily so an orchestration module was build using Fabric. The scalability and launching of new workers and web servers was achieved using Docker for creation and deployment of containers. Each container presents one module of the system (worker, web server, queue). The end result can now support all of our future games and only requires the game logic of each game to be added to the workers.</p>
<p>#### The Technologies</p>
<ul class="simple">
<li>Python for coding the game logic, web servers. More than 90% of the system was written in Python.</li>
<li>Fabric</li>
<li>SQLAlchemy</li>
<li>Riak</li>
<li>Redis</li>
<li>ZeroMQ</li>
<li>nginx</li>
<li>Docker</li>
<li>Websockets</li>
<li>AWS</li>
</ul>
<p>#### The Lessons Learned</p>
<ul class="simple">
<li>How to tune the backend to handle the increasing number of active players.</li>
<li>How to tackle the problem of frequent connection dropping and reachability issues of poor mobile device Internet connection in Tornado with a little help of Redis.</li>
<li>How to prevent users from trying to outsmart the system by denying illegal moves.</li>
<li>How to enable game profile syncing and live updating.</li>
<li>Improving the performance of workers by prioritizing data being stored to databases (Riak, SQL).</li>
<li>New issues and lessons show up all the time so there will definitely be more of them by the time of the conference.</li>
</ul>
<p>#### Basic Outline</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Intro (5 min)</dt>
<dd><ol class="first last arabic simple">
<li>Who are we?</li>
<li>How was Python used in our previous games</li>
<li>Why we decided to change it all</li>
</ol>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Requirements (6 min)</dt>
<dd><ol class="first last arabic simple">
<li>What was the goal of creating the game backend</li>
<li>Why was Python our first choice</li>
</ol>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Python backend (14 min)</dt>
<dd><ol class="first last arabic simple">
<li>The architecture of the backend</li>
<li>Which technologies did we use and how were they connected together</li>
<li>How the backend handles the game logic</li>
<li>Lessons learned</li>
</ol>
</dd>
</dl>
</li>
<li><p class="first">Questions &amp; Answers (5 min)</p>
</li>
</ol>
</div>
<div class="section" id="details">
<h2>Details</h2>
<ul class="simple">
<li>Category: EuroPython 2014</li>
<li>Language: English</li>
<li>Direct Link: <a class="reference external" href="http://www.youtube.com/watch?v=wWypp2KexGs">http://www.youtube.com/watch?v=wWypp2KexGs</a></li>
</ul>
</div>

  </div><!-- /.entry-content -->
</section>

    <footer class="footer">
      <p>&copy; 2016 pytube</p>
    </footer>

    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/theme/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>